var documenterSearchIndex = {"docs":
[{"location":"manual/OHP simulation/#ASETS-II","page":"ASETS-II","title":"ASETS-II","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"This is an example of a simulation package for conjugate heat transfer of an oscillaitng heat pipe.","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Firstly, let's import the necessary packages","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"using Pkg\nPkg.activate(dirname(pwd())) # using current environment for development","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"using ComputationalHeatTransfer # our main package\nusing LaTeXStrings # for latex strings\nusing JLD2 # for file input/output\n\nusing Plots # for plotting\ngr()  \n","category":"page"},{"location":"manual/OHP simulation/#Control-Console","page":"ASETS-II","title":"Control Console","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"This block contains the parameters I reckon could be tuned to match the experimental data.  As I am still tuning, they are placed here for convenience.","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"OHPtype = \"ASETS-II OHP 2 LARGE HEATER\"\npower = 40 #watts\nhc = 3000.0 #condenser heat transfer coefficient\nRn = 3e-6 # nucleation site radius\nδfilm = 2e-5 # initial film thickness\nad_fac = 1.3 # film thickness factor\nplate_d = 1.5e-3; # plate thickness\nEratio_plus = 0.15 + 0.5 # η+\nEratio_minus = 0.15 # η-","category":"page"},{"location":"manual/OHP simulation/#Properies","page":"ASETS-II","title":"Properies","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"params","category":"page"},{"location":"manual/OHP simulation/#Solid-Physical-parameters","page":"ASETS-II","title":"Solid Physical parameters","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"params is the HeatConductionParameters for the plate material (aluminum).","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"ρₛ = 2730; # density\ncₛ  = 8.93e02; # specific heat\nkₛ  = 1.93e02; # heat conductivity\nparams = HeatConductionParameters(ρₛ ,cₛ ,kₛ ,thickness=plate_d)","category":"page"},{"location":"manual/OHP simulation/#Fluid-Physical-parameters","page":"ASETS-II","title":"Fluid Physical parameters","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"pfluid contains the vapor and liquid properties at a constant reference temperatures. Noted that vapor pressures and vapor density will be functions of temperatures in the simulation, other properties are extracted from pfluid as an approximate value.","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Tref = 291.2 # reference temperature\nfluid_type = \"Butane\"\np_fluid = SaturationFluidProperty(fluid_type,Tref);","category":"page"},{"location":"manual/OHP simulation/#Plate-Conduction-Part","page":"ASETS-II","title":"Plate Conduction Part","text":"","category":"section"},{"location":"manual/OHP simulation/#Geometry-parameters","page":"ASETS-II","title":"Geometry parameters","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Lx = 0.1524; # plate size x\nLy = 0.0648; # plate size y\nxlim = (-Lx/2,Lx/2) # plate x limits\nylim = (-Ly/2,Ly/2) # plate y limits","category":"page"},{"location":"manual/OHP simulation/#Set-mesh-size-and-maximum-time-step","page":"ASETS-II","title":"Set mesh size and maximum time step","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Δx,Δt_max = setstepsizes(params.α,gridPe=8.0,fourier=0.3) ","category":"page"},{"location":"manual/OHP simulation/#Set-up-the-evaporators-and-condensers","page":"ASETS-II","title":"Set up the evaporators and condensers","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Tc = Tref; # condenser temperature\neparams,cparams = OHPConfiguration(OHPtype,power,Tc,hc,Δx,hc2ratio=1/30);","category":"page"},{"location":"manual/OHP simulation/#Set-up-OHP-channel's-shape","page":"ASETS-II","title":"Set up OHP channel's shape","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"x, y = construct_ohp_curve(\"ASETS\",Δx) # get x and y coordinates for the channel\nohp = BasicBody(x,y) # build a BasicBody based on x,y\nohpgeom = ComputationalHeatTransfer.LineSourceParams(ohp);","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"plot(ohp,fillalpha=0,linecolor=:blue,xlims=xlim,ylims=ylim,framestyle = :box)","category":"page"},{"location":"manual/OHP simulation/#Create-HeatConduction-system","page":"ASETS-II","title":"Create HeatConduction system","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"sys = HeatConduction(params,Δx,xlim,ylim,Δt_max,qline=ohpgeom,qflux=eparams,qmodel=cparams)","category":"page"},{"location":"manual/OHP simulation/#Create-OHP-inner-channel-system,-initial-state-vector,-and-callback-function","page":"ASETS-II","title":"Create OHP inner channel system, initial state vector, and callback function","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"sys_tube,u,cbst = initialize_ohpsys(OHPtype,fluid_type,sys,p_fluid,Tref,δfilm,Eratio_plus,Eratio_minus,Rn);","category":"page"},{"location":"manual/OHP simulation/#set-time-step","page":"ASETS-II","title":"set time step","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"tspan = (0.0, 1.0);\ndt_record = 0.01\nnum_data = tspan[2] / dt_record\n\ntstep = 5e-4","category":"page"},{"location":"manual/OHP simulation/#combine-inner-tube-and-plate-together","page":"ASETS-II","title":"combine inner tube and plate together","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"u_plate = newstate(sys) .+ Tref # initialize T field\nintegrator_plate = init(u_plate,tspan,sys)","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"prob = ODEProblem(ODE_innertube, u, tspan, sys_tube)\nintegrator_tube = init(prob, RK4(),save_on=false, dt=tstep, callback=cbst)","category":"page"},{"location":"manual/OHP simulation/#Resume","page":"ASETS-II","title":"Resume","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"# integrator_plate = integrator_plate_temp;","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"# integrator_tube = tube_hist[end];","category":"page"},{"location":"manual/OHP simulation/#Start","page":"ASETS-II","title":"Start","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"boil_hist=[]\nplate_T_hist = []\ntube_hist_u  = []\ntube_hist_t = []\ntube_hist_θwall = []","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"using Distributed\nusing ProgressMeter","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"@showprogress for t in tspan[1]:tstep:tspan[2]\n\n    timemarching!(integrator_tube,integrator_plate,tstep)\n    \n    if (mod(integrator_plate.t,dt_record) < 1e-6) || (mod(-integrator_plate.t,dt_record) < 1e-6)\n        push!(plate_T_hist,deepcopy(temperature(integrator_plate))); \n        push!(tube_hist_θwall,deepcopy(integrator_tube.p.wall.θarray))\n        push!(tube_hist_u,deepcopy(integrator_tube.u));\n        push!(tube_hist_t,deepcopy(integrator_tube.t));\n        integrator_plate_temp = deepcopy(integrator_plate)\n#         println(sys.qline[1].q[1:5])\n    end\n    \nend\n# integrator_plate.t","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"boil_hist","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"sysfinal = []\nfor i = 1:length(tube_hist_u)\n    sysfinaltemp = deepcopy(getcurrentsys(tube_hist_u[i],integrator_tube.p))\n    sysfinaltemp.wall.θarray = tube_hist_θwall[i]\n    push!(sysfinal, sysfinaltemp)\nend","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"gr()\nHₗ = sysfinal[1].liquid.Hₗ\nadjust = 1e-2;\n\nanim = @animate for i=1:length(sysfinal)\n    Htmp = sys_to_Harray(sysfinal[i])\n    Htmp_marker = round.(div.(Htmp,Hₗ-1e-10))\n    plot(ohp,clim=(0,2),fillalpha=0,linewidth=2.0,linecolor=palette([:yellow,  :blue, :red]),\n        line_z=Htmp_marker,xlabel=\"x \",ylabel=\"y \",border=:none,axis=nothing,bbox_inches=\"tight\")\n        annotate!(0.0, 0.028, string(\"time = \", round(tube_hist_t[i], digits=2), \"[s]\"), :black,legend=false)\n    scatter!([-0.066+adjust],[-0.028],color=:yellow);scatter!([-0.03+adjust],[-0.028],color=:red);scatter!([0.02+adjust],[-0.028],color=:blue);\n    annotate!(-0.05+0.002+adjust, -0.028, \"dry vapor\", :black)\n    annotate!(-0.01+0.005+adjust, -0.028, \"vapor with film\", :black)\n    annotate!(0.03+0.002+adjust, -0.028, \"liquid\", :black)\nend\ngif(anim, \"slug_fps15.gif\", fps = 10)","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"    x = [-2.75inch,-1.4inch,-0.8inch,0.0,0.0,0.8inch,1.4inch,2.75inch]\n    y = [0.0,0.0,0.0,0.0,0.4inch,0.0,0.0,0.0];\ngr()\nTmax = maximum(plate_T_hist[end]) .- 3.8\nTmin = minimum(plate_T_hist[1]) .- 3.8\nxlim = integrator_plate.p.grid.xlim[1]\nylim = integrator_plate.p.grid.xlim[2]\n\nanim = @animate for i = 1:1:length(sysfinal)\n# @gif for i = 1:1:1\nheatmap(plate_T_hist[i].- 3.8,sys.grid,legend=true,color=cgrad(:thermal),\n        xlimit=xlim,ylimit=ylim,clim=(Tmin,Tmax),line_z=0,xlabel=\"x [m]\",ylabel=\"y [m]\",\n        colorbar_title = \"\\n T[K]\",right_margin = 5Plots.mm)\nscatter!([x[1],x[4],x[8]],[y[1],y[4],y[8]])\nannotate!(x[1]+0.002, y[1]+0.005, \"RTD1\", :white)\nannotate!(x[4]+0.002, y[4]+0.005, \"RTD4\", :white)\nannotate!(x[8]-0.001, y[8]+0.005, \"RTD8\", :white)\nannotate!(0.05, -0.028, string(\"time = \", round(tube_hist_t[i], digits=2), \"[s]\"), :white,legend=false)\nend\ngif(anim, \"temperature_fps15.gif\", fps = 10)","category":"page"},{"location":"manual/OHP simulation/#Store-data","page":"ASETS-II","title":"Store data","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"using JLD2","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"boil_station_hist = [elem[1] for elem in boil_hist]\nboil_t_hist = [elem[2] for elem in boil_hist]\nboil_data = Array(reshape([boil_station_hist;boil_t_hist], length(boil_t_hist),2));","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"save(dirname(dirname(dirname(pwd())))*\"/OHPnume/OHP2_40W_large.jld2\",\n    \"tube_hist_θwall\", tube_hist_θwall,\"tube_hist_u\", tube_hist_u,\"tube_hist_t\", tube_hist_t,\n    \"integrator_tube\",integrator_tube,\"plate_T_hist\", plate_T_hist,\n    \"integrator_plate\", integrator_plate, \"boil_data\", boil_data,\"ohp\",ohp)","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"boiltime_stations","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"using XLSX\n# namei = \"20190604_F_PD_%23005_O002_H001_P010_expA.xlsx\"\n# namei = \"20190606_F_PD_%23006_O002_H001_P020_expA.xlsx\"\n# namei = \"20190612_F_PD_%23007_O002_H001_P030_expA.xlsx\"\nnamei = \"20190613_F_PD_%23008_O002_H001_P040_expA.xlsx\"\n# namei = \"20190613_F_PD_%23004_O001_H001_P040_expA.xlsx\"\n# namei = \"20190612_F_PD_%23003_O001_H001_P030_expA.xlsx\"\n# namei =     \"20190604_F_PD_%23001_O001_H001_P010_expA.xlsx\";\n#  namei =    \"20190606_F_PD_%23002_O001_H001_P020_expA.xlsx\";\n\nxf = XLSX.readxlsx(dirname(dirname(dirname(pwd())))*\"/OHPexp/\"*namei)\n    Onum, Hnum, power_exp = getconfig(namei)\n    RTD,RTDt = getRTD(xf,Onum);","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"    x = [-2.9inch,-1.4inch,-0.8inch,0.0,0.0,0.8inch,1.4inch,2.9inch]\n    y = [0.0,0.0,0.0,0.0,0.4inch,0.0,0.0,0.0];\n    X =  VectorData(x,y);\n    H = Regularize(X,cellsize(sys),I0=origin(sys.grid))\n    g = ScalarData(X);\n    ghist = getghist(g,H,plate_T_hist);\n    thist = tube_hist_t;","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"Tᵥ = Tref","category":"page"},{"location":"manual/OHP simulation/#post-processing","page":"ASETS-II","title":"post processing","text":"","category":"section"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"pyplot()\ni = 1 #RTD number\n\np1 = plot(thist,ghist[i] .-Tᵥ, color=:red, label=string(\"RTD\", i,\" simulation\"),linewidth=2,legend = :topleft)\nscatter!(RTDt .- RTDt[1],RTD[:,i] .- RTD[1,i], color=:red, label=string(\"RTD\", i,\" experiment\"))\n\ni = 4 #RTD number\n\np1 = plot!(thist,ghist[i] .-Tᵥ, color=:green, label=string(\"RTD\", i,\" simulation\"),linewidth=2,legend = :topleft)\nscatter!(RTDt .- RTDt[1],RTD[:,i] .- RTD[1,i], color=:green, label=string(\"RTD\", i,\" experiment\"))\n\ni = 8 #RTD number\nplot!(thist,ghist[i] .-Tᵥ,color=:orange,label=string(\"RTD\", i,\" simulation\"),linewidth=2)\nscatter!(RTDt .- RTDt[1],RTD[:,i] .- RTD[1,i], color=:orange, label=string(\"RTD\", i,\" experiment\"),\n    xlabel=\"time [s]\",ylabel=\"T-T₀ [K]\",xlim=(0,1),ylim=(0,3),title=(\"temperature curve: OHP2 large heater\"))\n\nsavefig(p1,\"temp_curve.pdf\")","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"M1 = sum.(getMvapor.(sysfinal));\nM2 = sum.(sum.(getMfilm.(sysfinal)));\nM3 = sum.(getMliquid.(sysfinal));\nMtotal = M1 .+ M2 .+ M3;\nM0 = Mtotal[1]\nplot(Mtotal/M0,ylim=(0.999,1.001))","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"M2","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"M3","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"θ_interp_walltoliquid\n    θ_interp_liquidtowall\n    H_interp_liquidtowall\n    P_interp_liquidtowall","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"sysfinal[3].mapping.P_interp_liquidtowall[1.0]","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"phist = []\nfor systemp in sysfinal\n    ptemp = systemp.mapping.P_interp_liquidtowall[3.0]\n    push!(phist, ptemp)\nend","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"plot(phist)","category":"page"},{"location":"manual/OHP simulation/","page":"ASETS-II","title":"ASETS-II","text":"","category":"page"},{"location":"#ComputationalHeatTransfer.jl","page":"Home","title":"ComputationalHeatTransfer.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This is the documentation for ComputationalHeatTransfer.jl","category":"page"}]
}
